<%= render :partial => 'spree/shared/error_messages', :locals => { :target => @user } %>
<h1><%= Spree.t(:registration) %></h1>
<div id="registration" data-hook>
  <div id="account" class="columns alpha eight">
<% if flash[:alert] %>
  <div class="flash errors"><%= flash[:alert] %></div>
<% end %>

<% @body_id = 'login' %>
<div id="existing-customer">
  <h6><%= Spree.t(:login_as_existing) %></h6>
  <div data-hook="login">
    <%= render :partial => 'spree/shared/login' %>
    <%= Spree.t(:or) %>
    <%= link_to Spree.t(:create_a_new_account), spree.signup_path %> |
    <%= link_to Spree.t(:forgot_password), spree.recover_password_path %>
  </div>
</div>
<div data-hook="login_extras"></div>
</div>
  <% if Spree::Config[:allow_guest_checkout] %>
    <div id="guest_checkout" data-hook class="columns omega eight">
      <h6><%= Spree.t(:guest_user_account) %></h6>
      <% if flash[:registration_error] %>
        <div class="flash error"><%= flash[:registration_error] %></div>
      <% end %>
      <%= form_for @order, :url => update_checkout_registration_path, :method => :put, :html => { :id => 'checkout_form_registration' } do |f| %>
        <p>
          <%= f.label :email, Spree.t(:email) %><br>
          <%= f.email_field :email, :class => 'title' %>
        </p>
        <p><%= f.submit Spree.t(:continue), :class => 'button primary' %></p>
      <% end %>
    </div>
  <% end %>
</div>
